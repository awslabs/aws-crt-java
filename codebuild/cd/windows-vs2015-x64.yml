version: 0.2

env:
  variables:
    AWS_CMAKE_GENERATOR: Visual Studio 14 2015 Win64

phases:
  install:
    commands:
      - .\aws-crt-java\codebuild\cd\windows-vs2015-setup.bat
  build:
    commands:
      - set JAVA_HOME="C:\jdk8"
      - echo JAVA_HOME="%JAVA_HOME%"
      - cd aws-crt-java
      - mvn -B compile
      - mkdir ..\dist
      - xcopy /S /F .\mvn-build\lib ..\dist\lib\

artifacts:
  files:
    - 'dist/**/*.dll'
  
cache:
  paths:
    - C:\Users\ContainerAdministrator\.m2\**\*
