version: 0.2

env:
  variables:
    AWS_CMAKE_GENERATOR: Visual Studio 14 2015

phases:
  install:
    commands:
      - .\aws-crt-java\codebuild\cd\windows-vs2015-setup.bat
  build:
    commands:
      - set JAVA_HOME="C:\jdk8"
      - cd aws-crt-java
      - .\codebuild\cd\windows-vs2015-any.bat
      - mkdir ..\dist
      - xcopy /S /F .\mvn-build\lib ..\dist\lib\

artifacts:
  files:
    - 'dist/**/*.dll' 

cache:
  paths:
    - C:\Users\ContainerAdministrator\.m2\**\*
